---
title: "Data_exploration"
author: "**Group 7**  \nMauro de Kort, Ruben van der Thiel, Martijn Hendriks, and
  Sem Niezink\n"
date: "06-09-24"
output:
  html_document:
    df_print: paged
  pdf_document:
    fig_caption: false
---



```{r, echo=FALSE, message=FALSE, warning=FALSE}
#Download the data

```


### Explanation of the data files


#### title.basics.tsv.gz


This file contains basic information about the titles from the movies and TV shows in the IMDb database.


```{r, echo=FALSE, message=FALSE, warning=FALSE}


basics_vars <- data.frame(
  Variable = c("tconst", "titleType", "primaryTitle", "originalTitle", 
               "isAdult", "startYear", "endYear", "runtimeMinutes", "genres"),
  Description = c("Alphanumeric unique identifier of the title.",
                  "Type of title (e.g., movie, short, tvseries, tvepisode).",
                  "The most popular title at the time of release.",
                  "Title in the original language.",
                  "Indicates whether the title is adult content (0: No, 1: Yes).",
                  "The year the title was first released.",
                  "The year the title ended (NA for non-series).",
                  "Runtime of the title in minutes.",
                  "Includes up to three genres associated with the title.")
)

kable(basics_vars, caption = "Variables in title.basics")
```


View the first rows of the data.
```{r, echo=FALSE, message=FALSE, warning=FALSE}
head(title_basics)
```





```{r, echo=FALSE, message=FALSE, warning=FALSE, fig.cap="Figure 1: Number of Titles by Adult Content Classification"}

title_basics_clean <- title_basics %>%
  filter(isAdult %in% c(0, 1))


adult_distribution <- title_basics_clean %>%
  group_by(isAdult) %>%
  summarise(count = n(), .groups = 'drop')


ggplot(adult_distribution, aes(x = factor(isAdult), y = count, fill = factor(isAdult))) +
  geom_bar(stat = "identity") +
  scale_fill_manual(values = c("0" = "blue", "1" = "red"), 
                    labels = c("Non-Adult", "Adult")) +
  ggtitle("Number of Titles by Adult Content Classification") +
  xlab("Adult Content Classification") +
  ylab("Number of Titles") +
  theme_minimal() +
  theme(legend.title = element_blank())


```

Figure 1 shows us a difference between does contain “is adult” and does not contain “is adult” titles. The vast majority of titles are not only for adults. More than 10 million titles dont have the  'is adult' stamp, on the other hand there are around 350,000 titles that do contain the 'is adult' stamp.



#### title.ratings.tsv.gz

This file contains user ratings and the number of votes for each title.

```{r, echo=FALSE, message=FALSE, warning=FALSE}
ratings_vars <- data.frame(
  Variable = c("tconst", "averageRating", "numVotes"),
  Description = c("Alphanumeric unique identifier of the title.",
                  "Weighted average of all user ratings.",
                  "Number of votes the title has received.")
)

kable(ratings_vars, caption = "Variables in title.ratings")
```



View the first rows of the data
```{r, echo=FALSE, message=FALSE, warning=FALSE}
head(title_ratings)
```

Analyse the data

```{r, echo=FALSE, message=FALSE, warning=FALSE, fig.cap="Figure 2: Distribution of Average Ratings"}
ggplot(title_ratings, aes(x = averageRating)) +
  geom_histogram(binwidth = 0.5, fill = "blue", color = "black") +
  ggtitle("Distribution of Average Ratings") +
  xlab("Average Rating") +
  ylab("Count") +
  theme_minimal()
```
Figure 2 shows the distribution of ratings for the te titels, the highest frequency takes place between grades 6.0 and 8.0 with a peak around 7.5. Furthermore, there are fewer lower ratings for the titels.


```{r, echo=FALSE, message=FALSE, warning=FALSE}
title_ratings <- title_ratings %>%
  mutate(vote_category = cut(numVotes, 
                             breaks = c(0, 100, 1000, 10000, 50000, 100000, Inf),
                             labels = c("0-100", "101-1,000", "1,001-10,000", 
                                        "10,001-50,000", "50,001-100,000", "100,001+")))


vote_distribution <- title_ratings %>%
  group_by(vote_category) %>%
  summarise(count = n(), .groups = 'drop')



kable(vote_distribution, caption = "Number of Titles per Voting Category" )
```

Table 4 shows how many votes the titles received. The majority has less then 100 votes, there are about 5000 titels with more then 50.000 votes.


#### title.episode.tsv.gz

This file contains information about TV show episodes.

```{r, echo=FALSE, message=FALSE, warning=FALSE}
episode_vars <- data.frame(
  Variable = c("tconst", "parentTconst", "seasonNumber", "episodeNumber"),
  Description = c("Alphanumeric identifier of the episode.",
                  "Identifier of the parent TV series.",
                  "The season number the episode belongs to.",
                  "The episode number within the season.")
)

kable(episode_vars, caption = "Variables in title.episode")
```


View the first rows of the data
```{r, echo=FALSE, message=FALSE, warning=FALSE}
head(title_episodes)
```

```{r, echo=FALSE, message=FALSE, warning=FALSE}
episodes_per_series <- title_episodes %>%
  group_by(parentTconst) %>%
  summarise(episode_count = n(), .groups = 'drop')

episodes_per_series <- episodes_per_series %>%
  mutate(episode_category = cut(episode_count, 
                                breaks = c(0, 5, 10, 20, 50, 100, Inf),
                                labels = c("1-5", "6-10", "11-20", "21-50", "51-100", "100+")))


episode_distribution <- episodes_per_series %>%
  group_by(episode_category) %>%
  summarise(count = n(), .groups = 'drop')


kable(episode_distribution, caption = "Number of TV Series per Episode Category")
```

```{r, echo=FALSE, message=FALSE, warning=FALSE}

summary_stats_episodes <- episodes_per_series %>%
  summarise(
    `Minimum` = min(episode_count),
    `Maximum` = max(episode_count),
    `Mean` = round(mean(episode_count), 2),  
    `Median` = median(episode_count)
  )


kable(summary_stats_episodes, caption = "Summary Statistics for Number of Episodes per TV Series" )
```

Tables 5 and 6 give us clarity on how many episodes the TV series have. The dataset contains a maximum number of episodes of 18593 and the average number of episodes per TV series is 8.